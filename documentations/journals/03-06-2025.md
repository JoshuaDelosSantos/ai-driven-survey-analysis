# Focus: Setting up Database (Tables and Content)
## Thinking back
- Yesterday I have set up the docker container, database connection and initial scripts.
- Yesterday I created scripts for creating user table in the database. If there is already a user table in the database then the script will just log that and pass.
- Yesterday I imported mock user data into the repo, I then created a script to load the rows into the database.

## Today
- The focus for today is creating more scripts sentiment analysis.
- To help me understand more about connecting to postgres with Python, I watched this [video](https://www.youtube.com/watch?v=2PDkXviEMD0).
- Created scripts to create learning_content table and load csv data into the table.
- Got Gemini 2.5 Pro to generate a data dictionary (JSON) for my mock data.
    - I will then be able to feed this into an LLM for context for my queries
- Utilised Claude 3.7 Sonnet to generate Python scripts to create tables for attendance and evaluation.
- Utilised Claude 3.7 Sonnet to generate Python scripts to load data for attendance and evaluation.
- Update db/README.md documentation.

### Key learnings from video [Postgres Tutorial - YouTube](https://www.youtube.com/watch?v=2PDkXviEMD0)
- Connecting to PostgreSQL: It details using the psycopg2 library to establish a connection by providing parameters like host, database name, user, and password. It also emphasizes the importance of closing the connection to free up resources.
- Using Cursors: Cursors, created from the connection object, are necessary for executing SQL commands. 
- Reading Data (SELECT): SQL queries are run using cursor.execute(). Results can be retrieved with methods like cursor.fetchall(), and the video shows how to iterate through these results.
- Writing Data (INSERT): The cursor.execute() method is also used for INSERT statements. A crucial best practice highlighted is the use of parameterized queries (e.g., using %s as placeholders) to prevent SQL injection vulnerabilities.
- Committing Changes: For operations that modify data (INSERT, UPDATE, DELETE), changes must be saved to the database using connection.commit().
- Error Handling: The video implicitly demonstrates error handling by showing what happens when trying to insert a duplicate primary key, illustrating how the database maintains data integrity.
- Best Practices:
    - Always close connections and cursors.
    - Be cautious with unbounded queries on large tables (e.g., SELECT * without LIMIT or WHERE).
    - Use parameterized queries to guard against SQL injection.
    - Remember to commit transactions when data is modified.
